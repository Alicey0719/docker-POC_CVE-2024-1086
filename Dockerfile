FROM rockylinux:9.3

RUN yum install -y git make wget tar gcc &&\
    yum clean all &&\
    rm -rf /var/cache/yum

# intall musl-gcc
ENV MUSL_VERSION=1.2.2
WORKDIR /opt/app/musl
RUN wget https://www.musl-libc.org/releases/musl-$MUSL_VERSION.tar.gz &&\
    tar -xzf musl-$MUSL_VERSION.tar.gz &&\
    cd musl-$MUSL_VERSION &&\
    ./configure --prefix=/usr/local/musl &&\
    make &&\
    make install

WORKDIR /opt/app/
RUN rm -rf /opt/app/musl

RUN git clone https://github.com/Notselwyn/CVE-2024-1086.git
WORKDIR /opt/app/CVE-2024-1086
RUN make


ENTRYPOINT ["bash"]

